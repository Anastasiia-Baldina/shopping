<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Создать кошелек</title>
</head>
<body>
    <h3>Rest запрос на создание кошелька</h3>
    <form id="create_account">
        <input type="text" id="userId" placeholder="Имя заказчика">
        <button type="submit">Создать кошелек</button>
    </form>

    <h3>Результат REST</h3>
    <div id="restResult"></div>

    <script>
        function clearResults() {
            document.getElementById('restResult').textContent = "";
        }

        function showRestResult(result) {
            console.log("Успех:", result)
            view = document.getElementById('restResult');
            view.textContent = "Успешно:" + JSON.stringify(result);
        }

        function showRestError(result) {
            console.log("Error:", result)
            view = document.getElementById('restResult');
            view.textContent = "Ошибка:" + JSON.stringify(result);
        }

        document.getElementById('create_account').addEventListener('submit', function(e) {
           e.preventDefault();
           clearResults();

            const data = {
                value: document.getElementById('userId').value
            };

            console.log("post:" + JSON.stringify(data));

            fetch('http://localhost:8081/pay/newAccount', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => showRestResult(data))
            .catch(error => showRestError(error));
        });
    </script>
</body>
</html>